<!-- Profile Content -->
<div class="profile-header">
  <h2>User Profile</h2>
  <button id="close-profile" class="close-btn">&times;</button>
</div>

<div class="profile-content">
    <div id="profile-loading" class="loading">Loading profile...</div>
    
    <div id="profile-data" style="display: none;">
      <!-- Account Information -->
      <div class="profile-section">
        <h3>Account Information</h3>
        <div class="profile-field">
          <label>User ID:</label>
          <div id="user-id" class="readonly-field"></div>
        </div>
        <div class="profile-field">
          <label>Email:</label>
          <div id="email-display"></div>
        </div>
        <div class="profile-field">
          <label>Account Created:</label>
          <div id="account-created"></div>
        </div>
      </div>

      <!-- Personal Information -->
      <div class="profile-section">
        <h3>Personal Information</h3>
        <div class="profile-field">
          <label>First Name:</label>
          <input type="text" id="first-name" disabled>
          <button data-field="first-name" class="edit-btn">Edit</button>
        </div>
        <div class="profile-field">
          <label>Last Name:</label>
          <input type="text" id="last-name" disabled>
          <button data-field="last-name" class="edit-btn">Edit</button>
        </div>
        <div class="profile-field">
          <label>Full Name:</label>
          <input type="text" id="full-name" disabled>
          <button data-field="full-name" class="edit-btn">Edit</button>
        </div>
      </div>

      <!-- Statistics -->
      <div class="profile-section">
        <h3>Logbook Statistics</h3>
        <div class="profile-field">
          <label>Total Contracts:</label>
          <span id="total-contracts">0</span>
        </div>
        <div class="profile-field">
          <label>Active Contracts:</label>
          <span id="active-contracts">0</span>
        </div>
        <div class="profile-field">
          <label>Completed Contracts:</label>
          <span id="completed-contracts">0</span>
        </div>
      </div>

      <!-- Default Map Smart View -->
      <div class="profile-section">
        <h3>Default Map Smart View</h3>
        <p style="color: #666; font-size: 14px; margin-bottom: 15px;">
          Select which regions to include when the map automatically fits to show all your contracts.
          Unchecked regions will still appear on the map but won't affect the automatic zoom level.
        </p>
        
        <div class="map-preferences-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px;">
          <!-- US Mainland -->
          <div class="preference-group">
            <h4 style="margin: 0 0 8px 0; color: #333; font-size: 14px;">üá∫üá∏ United States</h4>
            <div class="checkbox-field">
              <input type="checkbox" id="pref-conus" checked>
              <label for="pref-conus">Continental US (CONUS)</label>
            </div>
            <div class="checkbox-field">
              <input type="checkbox" id="pref-alaska" checked>
              <label for="pref-alaska">Alaska</label>
            </div>
            <div class="checkbox-field">
              <input type="checkbox" id="pref-hawaii" checked>
              <label for="pref-hawaii">Hawaii</label>
            </div>
          </div>

          <!-- US Territories -->
          <div class="preference-group">
            <h4 style="margin: 0 0 8px 0; color: #333; font-size: 14px;">üèùÔ∏è US Territories</h4>
            <div class="checkbox-field">
              <input type="checkbox" id="pref-puerto-rico" checked>
              <label for="pref-puerto-rico">Puerto Rico</label>
            </div>
            <div class="checkbox-field">
              <input type="checkbox" id="pref-us-virgin-islands" checked>
              <label for="pref-us-virgin-islands">US Virgin Islands</label>
            </div>
            <div class="checkbox-field">
              <input type="checkbox" id="pref-guam">
              <label for="pref-guam">Guam</label>
            </div>
            <div class="checkbox-field">
              <input type="checkbox" id="pref-american-samoa">
              <label for="pref-american-samoa">American Samoa</label>
            </div>
            <div class="checkbox-field">
              <input type="checkbox" id="pref-northern-mariana">
              <label for="pref-northern-mariana">Northern Mariana Islands</label>
            </div>
          </div>
        </div>

        <div class="preference-group" style="margin-top: 15px;">
          <h4 style="margin: 0 0 8px 0; color: #333; font-size: 14px;">üåç International</h4>
          <div class="checkbox-field">
            <input type="checkbox" id="pref-canada">
            <label for="pref-canada">Canada</label>
          </div>
          <div class="checkbox-field">
            <input type="checkbox" id="pref-mexico">
            <label for="pref-mexico">Mexico & Central America</label>
          </div>
          <div class="checkbox-field">
            <input type="checkbox" id="pref-caribbean">
            <label for="pref-caribbean">Caribbean (non-US)</label>
          </div>
          <div class="checkbox-field">
            <input type="checkbox" id="pref-europe">
            <label for="pref-europe">Europe</label>
          </div>
          <div class="checkbox-field">
            <input type="checkbox" id="pref-asia-pacific">
            <label for="pref-asia-pacific">Asia & Pacific</label>
          </div>
          <div class="checkbox-field">
            <input type="checkbox" id="pref-other-international">
            <label for="pref-other-international">Other International</label>
          </div>
        </div>

        <div style="margin-top: 15px; padding: 10px; background-color: #f0f8ff; border-radius: 6px; font-size: 14px; color: #666;">
          <span id="map-preferences-status">Map preferences will be saved with your profile</span>
        </div>
      </div>

      <!-- Manual Profile Completion -->
      <div class="profile-section">
        <h3>Profile Status</h3>
        <button id="mark-profile-complete" class="edit-btn" style="background: #28a745; padding: 8px 16px;">
          Mark Profile as Complete
        </button>
        <small style="display: block; margin-top: 5px; color: #666;">
          Click this if all fields are filled but the system still asks you to complete your profile.
        </small>
      </div>

      <!-- Save Profile Section -->
      <div class="profile-section">
        <div style="text-align: center; padding: 20px;">
          <button id="save-profile-btn" class="primary-button" style="
            background: #28a745;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 4px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s ease;
            min-width: 200px;
          ">
            üíæ Save Profile
          </button>
          <div id="profile-save-status" style="margin-top: 15px; font-size: 14px; min-height: 20px;"></div>
        </div>
      </div>
    </div>
    
    <!-- Danger Zone -->
    <div class="profile-section danger-zone" style="margin-top: 30px;">
      <h3 style="color: #dc3545;">‚ö†Ô∏è Danger Zone</h3>
      <div class="profile-field">
        <p style="color: #666; margin-bottom: 10px;">
          <strong>Warning:</strong> This action will permanently delete your entire account, 
          all profile data, contract history, and cannot be undone.
        </p>
        <button id="nuclear-delete-btn" class="nuclear-delete-btn" type="button">
          üóëÔ∏è DELETE EVERYTHING
        </button>
      </div>
    </div>

  <div id="profile-error" class="error-message" style="display: none;"></div>
  <div id="profile-success" class="success-message" style="display: none;"></div>
</div>