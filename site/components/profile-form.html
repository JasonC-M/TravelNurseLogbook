<div class="profile-header">
  <h2>User Profile</h2>
  <div class="header-actions">
    <!-- Display Mode Actions -->
    <div class="display-actions">
      <button type="button" id="edit-profile-btn" class="slideout-header-grey-compact">Edit</button>
      <button type="button" id="close-profile-display-btn" class="slideout-header-grey-compact">Close</button>
    </div>
    
    <!-- Edit Mode Actions -->
    <div class="edit-actions" style="display: none;">
      <button type="button" id="save-profile-btn" class="slideout-header-grey-compact">Save</button>
      <button type="button" id="cancel-profile-edit-btn" class="slideout-header-grey-compact">Cancel</button>
    </div>
  </div>
</div>

<div class="profile-content">
    <div id="profile-loading" class="loading">Loading profile...</div>
    
    <div id="profile-data" style="display: none;">
      <!-- Account Information -->
      <div class="profile-section">
        <h3>Account Information</h3>
        <div class="profile-field">
          <label>User ID:</label>
          <div id="user-id" class="readonly-field"></div>
        </div>
        <div class="profile-field">
          <label>Email:</label>
          <div id="email-display"></div>
        </div>
        <div class="profile-field">
          <label>Account Created:</label>
          <div id="account-created"></div>
        </div>
      </div>

      <!-- Personal Information -->
      <div class="profile-section">
        <h3>Personal Information</h3>
        <div class="profile-field">
          <label for="first-name">First Name:</label>
          <input type="text" id="first-name" name="first_name" disabled>
          <div class="display-value" id="first-name-display"></div>
        </div>
        <div class="profile-field">
          <label for="last-name">Last Name:</label>
          <input type="text" id="last-name" name="last_name" disabled>
          <div class="display-value" id="last-name-display"></div>
        </div>
        <div class="profile-field">
          <label for="full-name">Full Name:</label>
          <input type="text" id="full-name" name="full_name" disabled>
          <div class="display-value" id="full-name-display"></div>
        </div>
      </div>

      <!-- Statistics -->
      <div class="profile-section">
        <h3>Logbook Statistics</h3>
        <div class="profile-field">
          <label>Total Contracts:</label>
          <span id="total-contracts">0</span>
        </div>
        <div class="profile-field">
          <label>Active Contracts:</label>
          <span id="active-contracts">0</span>
        </div>
        <div class="profile-field">
          <label>Completed Contracts:</label>
          <span id="completed-contracts">0</span>
        </div>
      </div>

      <!-- Default Map Smart View -->
      <div class="profile-section">
        <h3>Default Map Smart View</h3>
        <p style="color: #666; font-size: 14px; margin-bottom: 15px;">
          Select which regions to include when the map automatically fits to show all your contracts.
          Unchecked regions will still appear on the map but won't affect the automatic zoom level.
        </p>
        
        <div class="map-preferences-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px;">
          <!-- US Mainland -->
          <div class="preference-group">
            <h4 style="margin: 0 0 8px 0; color: #333; font-size: 14px;">üá∫üá∏ United States</h4>
            <div class="checkbox-field">
              <input type="checkbox" id="pref-conus" checked>
              <label for="pref-conus">Continental US (CONUS)</label>
            </div>
            <div class="checkbox-field">
              <input type="checkbox" id="pref-alaska">
              <label for="pref-alaska">Alaska</label>
            </div>
            <div class="checkbox-field">
              <input type="checkbox" id="pref-hawaii">
              <label for="pref-hawaii">Hawaii</label>
            </div>
          </div>

          <!-- US Territories -->
          <div class="preference-group">
            <h4 style="margin: 0 0 8px 0; color: #333; font-size: 14px;">üèùÔ∏è US Territories</h4>
            <div class="checkbox-field">
              <input type="checkbox" id="pref-puerto-rico">
              <label for="pref-puerto-rico">Puerto Rico</label>
            </div>
            <div class="checkbox-field">
              <input type="checkbox" id="pref-us-virgin-islands">
              <label for="pref-us-virgin-islands">US Virgin Islands</label>
            </div>
            <div class="checkbox-field">
              <input type="checkbox" id="pref-guam">
              <label for="pref-guam">Guam</label>
            </div>
            <div class="checkbox-field">
              <input type="checkbox" id="pref-american-samoa">
              <label for="pref-american-samoa">American Samoa</label>
            </div>
            <div class="checkbox-field">
              <input type="checkbox" id="pref-northern-mariana">
              <label for="pref-northern-mariana">Northern Mariana Islands</label>
            </div>
          </div>
        </div>

        <div class="preference-group" style="margin-top: 15px;">
          <h4 style="margin: 0 0 8px 0; color: #333; font-size: 14px;">üåç International</h4>
          <div class="checkbox-field">
            <input type="checkbox" id="pref-canada">
            <label for="pref-canada">Canada</label>
          </div>
          <div class="checkbox-field">
            <input type="checkbox" id="pref-mexico">
            <label for="pref-mexico">Mexico & Central America</label>
          </div>
          <div class="checkbox-field">
            <input type="checkbox" id="pref-caribbean">
            <label for="pref-caribbean">Caribbean (non-US)</label>
          </div>
          <div class="checkbox-field">
            <input type="checkbox" id="pref-europe">
            <label for="pref-europe">Europe</label>
          </div>
          <div class="checkbox-field">
            <input type="checkbox" id="pref-asia-pacific">
            <label for="pref-asia-pacific">Asia & Pacific</label>
          </div>
          <div class="checkbox-field">
            <input type="checkbox" id="pref-other-international">
            <label for="pref-other-international">Other International</label>
          </div>
        </div>

        <div class="edit-only" style="display: none; margin-top: 15px; padding: 10px; background-color: #f0f8ff; border-radius: 6px; font-size: 14px; color: #666;">
          <span id="map-preferences-status">Map preferences will be saved with your profile</span>
        </div>
      </div>

      <!-- Manual Profile Completion - Only visible in edit mode -->
      <div class="profile-section edit-only" style="display: none;">
        <h3>Profile Status</h3>
        <button id="mark-profile-complete" class="primary-btn">
          Mark Profile as Complete
        </button>
        <small style="display: block; margin-top: 5px; color: #666;">
          Click this if all fields are filled but the system still asks you to complete your profile.
        </small>
      </div>

      <!-- Danger Zone - Only visible in edit mode -->
      <div class="danger-zone edit-only" style="display: none; padding: 20px; margin-top: 30px; border: 2px solid #dc3545; border-radius: 8px; background-color: #fff5f5;">
        <h3 style="margin: 0 0 20px 0; padding: 0 0 10px 0; color: #dc3545; border-bottom: 1px solid #dc3545;">‚ö†Ô∏è Danger Zone</h3>
        <p style="margin: 0 0 20px 0; padding: 0; color: #721c24; font-weight: 500;">
          <strong>Warning:</strong> This action will permanently delete your entire account, 
          all profile data, contract history, and cannot be undone.
        </p>
        <button id="profile-delete-btn" class="slideout-danger-red-standard">üóëÔ∏è DELETE EVERYTHING</button>
      </div>
    </div>
</div>